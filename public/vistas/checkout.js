// ...existing code...
function init() {
  // ...existing code...
  let has_error = false;
  // ...existing code...
  if (has_error) {
    // ...handle error...
  }
  // ...existing code...

  // New code: if URL contains a "reference" parameter, open the checkout modal
  const params = new URLSearchParams(window.location.search);
  const qReference = params.get("reference");
  if (qReference) {
    // Assuming paymentCheckout is accessible in this scope
    paymentCheckout.open({ reference: qReference }); // note: no extraneous comma here
  }
  // ...existing code...
}
// ...existing code...
